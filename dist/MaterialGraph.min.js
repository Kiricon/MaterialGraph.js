var Graph=function(t,i){this.canvas=t,this.dataset=i,this.points=[],this.position={x:0,y:0},this.min=0,this.max=0,this.highlight="",this.point={},this.ratio=1,this.realWidth,this.convert(),this.draw()};Graph.prototype.init=function(){this.canvas.getContext("2d");this.makeHighRes()},Graph.prototype.listen=function(){var t=this;this.canvas.addEventListener("mousemove",function(i){t.position=t.getMousePos(i),t.draw()},!1),this.canvas.addEventListener("touchmove",function(i){t.position=t.getMousePos(i),t.draw()},!1),this.canvas.addEventListener("touchstart",function(i){t.position=t.getMousePos(i),t.draw()},!1)},Graph.prototype.makeHighRes=function(){var t=this.canvas.getContext("2d"),i=window.devicePixelRatio||1,s=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1,a=i/s;if(i!==s){var e=this.canvas.width,o=this.canvas.height;this.canvas.width=Math.round(e*a),this.canvas.height=Math.round(o*a),this.canvas.style.width=e+"px",this.canvas.style.height=o+"px",t.save(),t.scale(a,a),this.ratio=a,t.restore()}},Graph.prototype.convert=function(){var t=0,i=0;this.dataset.forEach(function(s){s.x>t&&(t=s.x),s.y>i&&(i=s.y)});var s=t,a=i;this.dataset.forEach(function(t){t.x<s&&(s=t.x),t.y<a&&(a=t.y)});var e=Math.abs(t-s),o=Math.abs(i-a),n=this.canvas.width,h=0;if(this.min=h,this.max=n,e>o)var r=t,c=s;else var r=i,c=a;console.log(n+" "+h);var v=r-c,p=n-h,l=this;this.dataset.forEach(function(t){var i={x:(t.x-c)*p/v+h,y:l.canvas.width-((t.y-c)*p/v+h)};l.points.push(i)}),console.log(this.points)},Graph.prototype.getMousePos=function(t){t.preventDefault();var i=this.canvas.getBoundingClientRect();return window.event.touches?{x:(window.event.touches[0].pageX-i.left)*this.ratio,y:(window.event.touches[0].pageY-i.top)*this.ratio}:{x:(t.clientX-i.left)*this.ratio,y:(t.clientY-i.top)*this.ratio}},Graph.prototype.draw=function(t){var i=this.canvas,s=i.getContext("2d"),a=0;this.realWidth/this.points.length;s.clearRect(0,0,i.width,i.height),s.fillStyle="#FFF",s.fillRect(0,0,i.width,i.height),s.fillStyle="#FFF",s.beginPath(),s.save();s.beginPath(),s.moveTo(this.points[0].x,this.points[0].y);for(var a=0;a<this.points.length;a++)s.lineTo(this.points[a].x,this.points[a].y);s.strokeStyle="#00C853",s.lineWidth=2*this.ratio,s.stroke()};