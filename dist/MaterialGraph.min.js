var Graph=function(t,i){this.canvas=t,this.dataset=i,this.points=[],this.position={x:0,y:0},this.min=0,this.max=0,this.highlight="",this.point={},this.ratio=1,this.realWidth,this.init(),this.convert(),this.listen(),this.draw()};Graph.prototype.init=function(){this.canvas.getContext("2d");this.makeHighRes()},Graph.prototype.listen=function(){var t=this;this.canvas.addEventListener("mousemove",function(i){t.position=t.getMousePos(i),t.draw()},!1),this.canvas.addEventListener("touchmove",function(i){t.position=t.getMousePos(i),t.draw()},!1),this.canvas.addEventListener("touchstart",function(i){t.position=t.getMousePos(i),t.draw()},!1)},Graph.prototype.convert=function(){var t=0,i=0;this.dataset.forEach(function(s){s.x>t&&(t=s.x),s.y>i&&(i=s.y)});var s=t,o=i;this.dataset.forEach(function(t){t.x<s&&(s=t.x),t.y<o&&(o=t.y)});var h=Math.abs(t-s),a=Math.abs(i-o),n=this.canvas.width-20,e=20;if(this.min=e,this.max=n,h>a)var r=t,v=s;else var r=i,v=o;console.log(n+" "+e);var c=r-v,p=n-e,l=this;this.dataset.forEach(function(t){var i={x:(t.x-v)*p/c+e,y:l.canvas.width-20-((t.y-v)*p/c+e)};l.points.push(i)}),console.log(this.points)},Graph.prototype.draw=function(t){function i(t,i){for(var s=i[0],o=Math.abs(t-s.x),h=0;h<i.length;h++){var a=Math.abs(t-i[h].x);a<o&&(o=a,s=i[h])}return s}var s=this.canvas,o=s.getContext("2d"),h=0;this.realWidth/this.points.length;o.clearRect(0,0,s.width,s.height),o.fillStyle="#FFF",o.fillRect(0,0,s.width,s.height),o.fillStyle="#FFF",o.beginPath(),o.save();o.moveTo(this.points[0].x,this.points[0].y);for(var h=0;h<this.points.length;h++)o.lineTo(this.points[h].x,this.points[h].y);if(o.strokeStyle="#00C853",o.lineWidth=2*this.ratio,o.stroke(),o.restore(),this.position.x){o.save(),o.beginPath(),o.moveTo(this.position.x,0),o.lineTo(this.position.x,s.height),o.strokeStyle="#777777",o.stroke(),o.restore(),o.save(),o.beginPath();var i=i(this.position.x,this.points);o.arc(i.x,i.y,5,0,2*Math.PI,!1),o.fillStyle="#00C853",o.fill()}};